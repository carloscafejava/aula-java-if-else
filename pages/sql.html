<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <meta name="description" content="SQL - Conceitos, Opera√ß√µes, JOINs, Agrega√ß√µes e Manipula√ß√£o de Dados">
    <meta name="theme-color" content="#8B5A2B">
    <title>SQL - Guia Completo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs2015.min.css">
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/pages.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <header class="header">
            <div class="header-content">
                <!-- Logo SVG -->
                <div class="logo-wrapper">
                    <svg class="logo" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" aria-label="JAVA Coffee Cup Logo">
                        <defs>
                            <linearGradient id="neonGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#00D4FF;stop-opacity:0.6" />
                                <stop offset="100%" style="stop-color:#0099FF;stop-opacity:0.3" />
                            </linearGradient>
                        </defs>
                        <path class="cup-body" d="M 60 70 L 50 140 Q 50 160 70 160 L 130 160 Q 150 160 150 140 L 140 70 Z" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                        <ellipse class="cup-body" cx="100" cy="160" rx="45" ry="8" fill="none" stroke="currentColor" stroke-width="3"/>
                        <path class="cup-handle" d="M 140 90 Q 170 90 170 120 Q 170 150 140 150" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                        <path class="cup-liquid" d="M 60 130 L 52 145 Q 52 155 70 158 L 130 158 Q 148 155 148 145 L 140 130 Q 100 135 60 130 Z" fill="currentColor" opacity="0.4"/>
                        <path class="steam-line" d="M 70 60 Q 65 45 70 30" stroke="currentColor" stroke-width="2" fill="none" opacity="0.6" stroke-linecap="round"/>
                        <path class="steam-line" d="M 100 55 Q 95 35 100 15" stroke="currentColor" stroke-width="2" fill="none" opacity="0.6" stroke-linecap="round"/>
                        <path class="steam-line" d="M 130 60 Q 135 45 130 30" stroke="currentColor" stroke-width="2" fill="none" opacity="0.6" stroke-linecap="round"/>
                        <circle cx="100" cy="100" r="50" fill="none" stroke="url(#neonGradient)" stroke-width="1" opacity="0.4" class="neon-ring"/>
                    </svg>
                </div>

                <!-- T√≠tulo -->
                <div class="header-text">
                    <h1>JAVA Learning</h1>
                    <p class="subtitle">Hub de Conte√∫do</p>
                </div>

                <!-- Toggle Modo Escuro/Claro -->
                <button class="theme-toggle" id="themeToggle" aria-label="Alternar entre modo claro e escuro">
                    <svg class="sun-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                    <svg class="moon-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
            </div>
        </header>

        <!-- CONTE√öDO -->
        <section class="content">
            <h1>üìä SQL - Linguagem de Consulta Estruturada</h1>
            <p class="subtitle">Conceitos, Opera√ß√µes, JOINs, Agrega√ß√µes e Manipula√ß√£o de Dados</p>

            <!-- INTRODU√á√ÉO -->
            <div class="section">
                <h2>1. O que √© SQL?</h2>
                
                <div class="intro-text">
                    <p><strong>SQL (Structured Query Language)</strong> √© a linguagem padr√£o para gerenciar e manipular dados em bancos de dados relacionais. Ela permite consultar, inserir, atualizar e deletar dados de forma eficiente e segura.</p>

                    <p>SQL √© utilizada para interagir com diversos sistemas de gerenciamento de banco de dados (SGBD), como MySQL, PostgreSQL, SQL Server, Oracle e SQLite. Uma das principais caracter√≠sticas do SQL √© sua sintaxe simples e intuitiva, tornando-a acess√≠vel mesmo para iniciantes.</p>

                    <p>Os dados em um banco de dados SQL s√£o organizados em <strong>tabelas</strong>, que cont√™m <strong>linhas</strong> (registros) e <strong>colunas</strong> (campos ou atributos). Cada tabela representa uma entidade, como Usu√°rios, Produtos ou Pedidos.</p>

                    <p>As opera√ß√µes fundamentais em SQL s√£o conhecidas como <strong>CRUD</strong>:</p>
                    <ul>
                        <li><strong>CREATE (CREATE):</strong> inserir novos dados</li>
                        <li><strong>READ (SELECT):</strong> consultar dados existentes</li>
                        <li><strong>UPDATE (UPDATE):</strong> modificar dados existentes</li>
                        <li><strong>DELETE (DELETE):</strong> remover dados</li>
                    </ul>

                    <p>Al√©m do CRUD b√°sico, SQL oferece recursos avan√ßados como <strong>JOINs</strong> para combinar dados de m√∫ltiplas tabelas, <strong>agrega√ß√µes</strong> para calcular resumos (como somas e m√©dias), <strong>subconsultas</strong> e <strong>√≠ndices</strong> para otimizar o desempenho das consultas.</p>

                    <p>SQL tamb√©m √© respons√°vel pela <strong>integridade de dados</strong> atrav√©s de restri√ß√µes, garantindo que os dados armazenados sejam precisos e consistentes. Isso inclui chaves prim√°rias, chaves estrangeiras e valida√ß√µes de dados.</p>

                    <p>Em resumo, SQL √© a linguagem fundamental para qualquer desenvolvedor que trabalhe com dados, tornando imprescind√≠vel seu dom√≠nio para desenvolvimento de aplica√ß√µes robustas e escal√°veis.</p>
                </div>
            </div>

            <!-- CONCEITOS FUNDAMENTAIS -->
            <div class="section">
                <h2>2. Conceitos Fundamentais</h2>

                <div class="solid-box" style="border-left: 5px solid #0ea5e9;">
                    <h3>Banco de Dados (Database)</h3>
                    <ul class="explanation-list">
                        <li><strong>Defini√ß√£o:</strong> Cole√ß√£o organizada de dados relacionados</li>
                        <li><strong>Fun√ß√£o:</strong> Armazenar informa√ß√µes de forma estruturada</li>
                        <li><strong>Exemplo:</strong> sistema de vendas, rede social, e-commerce</li>
                        <li><strong>Acesso:</strong> Via SQL ou ORM (Object-Relational Mapping)</li>
                    </ul>
                </div>

                <div class="solid-box" style="border-left: 5px solid #10b981;">
                    <h3>Tabela (Table)</h3>
                    <ul class="explanation-list">
                        <li><strong>Defini√ß√£o:</strong> Estrutura de dois n√≠veis com colunas e linhas</li>
                        <li><strong>Linhas:</strong> Registros ou tuplas (dados individuais)</li>
                        <li><strong>Colunas:</strong> Campos ou atributos (tipos de dados)</li>
                        <li><strong>Exemplo:</strong> Tabela usu√°rios com colunas: id, nome, email</li>
                    </ul>
                </div>

                <div class="solid-box" style="border-left: 5px solid #f59e0b;">
                    <h3>Chave Prim√°ria (Primary Key)</h3>
                    <ul class="explanation-list">
                        <li><strong>Fun√ß√£o:</strong> Identificador √∫nico de cada registro</li>
                        <li><strong>Caracter√≠sticas:</strong> N√£o pode ser nula, deve ser √∫nica</li>
                        <li><strong>Exemplo:</strong> id em uma tabela de usu√°rios</li>
                        <li><strong>Utilidade:</strong> Garante integridade e permite busca r√°pida</li>
                    </ul>
                </div>

                <div class="solid-box" style="border-left: 5px solid #ef4444;">
                    <h3>Chave Estrangeira (Foreign Key)</h3>
                    <ul class="explanation-list">
                        <li><strong>Fun√ß√£o:</strong> Conecta registros entre tabelas diferentes</li>
                        <li><strong>Caracter√≠sticas:</strong> Referencia a chave prim√°ria de outra tabela</li>
                        <li><strong>Exemplo:</strong> usuario_id em uma tabela de pedidos</li>
                        <li><strong>Utilidade:</strong> Mant√©m relacionamentos e integridade referencial</li>
                    </ul>
                </div>
            </div>

            <div class="divider"></div>

            <!-- TIPOS DE DADOS -->
            <div class="section">
                <h2>3. Tipos de Dados em SQL</h2>

                <p>SQL oferece diferentes tipos de dados para armazenar informa√ß√µes espec√≠ficas. Escolher o tipo correto √© fundamental para otimizar o desempenho e garantir a integridade dos dados.</p>

                <h3>Tipos de Dados Comuns:</h3>
                <div class="code-wrapper">
                    <div class="code-header">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                        <span class="code-lang">sql</span>
                    </div>
                    <pre><code class="language-sql">-- NUM√âRICOS
INT, INTEGER        -- N√∫meros inteiros (-2147483648 a 2147483647)
BIGINT             -- N√∫meros inteiros grandes
SMALLINT           -- N√∫meros inteiros pequenos
DECIMAL(p, s)      -- N√∫meros decimais precisos (ex: DECIMAL(10, 2))
FLOAT              -- N√∫meros decimais com ponto flutuante

-- TEXTUAIS
VARCHAR(n)         -- Texto vari√°vel at√© n caracteres
CHAR(n)            -- Texto fixo com n caracteres
TEXT               -- Texto longo sem limite

-- DATAS E HOR√ÅRIOS
DATE               -- Data (YYYY-MM-DD)
TIME               -- Hora (HH:MM:SS)
DATETIME           -- Data e hora
TIMESTAMP          -- Timestamp autom√°tico

-- BOOLEANOS
BOOLEAN            -- TRUE ou FALSE (ou 1 ou 0)

-- ESPECIAIS
BLOB               -- Dados bin√°rios (imagens, arquivos)
JSON               -- Dados em formato JSON
UUID               -- Identificador √∫nico global</code></pre>
                </div>
            </div>

            <div class="divider"></div>

            <!-- OPERA√á√ïES B√ÅSICAS -->
            <div class="section">
                <h2>4. Opera√ß√µes B√°sicas - CRUD</h2>

                <h3>CREATE TABLE - Criar Tabela:</h3>
                <div class="code-wrapper">
                    <div class="code-header">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                        <span class="code-lang">sql</span>
                    </div>
                    <pre><code class="language-sql">CREATE TABLE usuarios (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nome VARCHAR(100) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    senha VARCHAR(255) NOT NULL,
    data_nascimento DATE,
    ativo BOOLEAN DEFAULT TRUE,
    criado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    atualizado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- Constraints (Restri√ß√µes):
-- NOT NULL    - Campo obrigat√≥rio
-- UNIQUE      - Valor √∫nico (n√£o pode repetir)
-- PRIMARY KEY - Identificador √∫nico da tabela
-- FOREIGN KEY - Refer√™ncia a outra tabela
-- DEFAULT     - Valor padr√£o
-- CHECK       - Valida√ß√£o customizada</code></pre>
                </div>

                <h3>INSERT - Inserir Dados:</h3>
                <div class="code-wrapper">
                    <div class="code-header">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                        <span class="code-lang">sql</span>
                    </div>
                    <pre><code class="language-sql">-- Inserir um registro
INSERT INTO usuarios (nome, email, senha, data_nascimento)
VALUES ('Ana Silva', 'ana@example.com', 'senha123', '1995-05-15');

-- Inserir m√∫ltiplos registros
INSERT INTO usuarios (nome, email, senha, data_nascimento) VALUES
('Bruno Costa', 'bruno@example.com', 'senha456', '1990-08-20'),
('Carlos Souza', 'carlos@example.com', 'senha789', '1992-03-10'),
('Diana Lima', 'diana@example.com', 'senha000', '1998-11-25');

-- Inserir com SELECT (copiar dados de outra tabela)
INSERT INTO usuarios_backup
SELECT * FROM usuarios WHERE ativo = TRUE;</code></pre>
                </div>

                <h3>SELECT - Consultar Dados:</h3>
                <div class="code-wrapper">
                    <div class="code-header">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                        <span class="code-lang">sql</span>
                    </div>
                    <pre><code class="language-sql">-- Selecionar todas as colunas
SELECT * FROM usuarios;

-- Selecionar colunas espec√≠ficas
SELECT id, nome, email FROM usuarios;

-- Com WHERE (filtrar)
SELECT * FROM usuarios WHERE ativo = TRUE;
SELECT * FROM usuarios WHERE nome LIKE 'A%'; -- Come√ßa com A
SELECT * FROM usuarios WHERE id > 5 AND ativo = TRUE;

-- Com ORDER BY (ordenar)
SELECT * FROM usuarios ORDER BY nome ASC;  -- Ascendente
SELECT * FROM usuarios ORDER BY id DESC;   -- Descendente

-- Com LIMIT (limitar resultados)
SELECT * FROM usuarios LIMIT 10;
SELECT * FROM usuarios LIMIT 10 OFFSET 5;  -- Pagina√ß√£o

-- Com DISTINCT (valores √∫nicos)
SELECT DISTINCT cidade FROM usuarios;

-- Combinando cl√°usulas
SELECT nome, email FROM usuarios 
WHERE ativo = TRUE 
ORDER BY nome ASC 
LIMIT 20;</code></pre>
                </div>

                <h3>UPDATE - Atualizar Dados:</h3>
                <div class="code-wrapper">
                    <div class="code-header">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                        <span class="code-lang">sql</span>
                    </div>
                    <pre><code class="language-sql">-- Atualizar um registro espec√≠fico
UPDATE usuarios SET nome = 'Ana Silva Santos' WHERE id = 1;

-- Atualizar m√∫ltiplos campos
UPDATE usuarios 
SET nome = 'Ana Silva Santos', email = 'ana.silva@example.com'
WHERE id = 1;

-- Atualizar v√°rios registros
UPDATE usuarios SET ativo = FALSE WHERE criado_em < '2020-01-01';

-- Usando express√µes
UPDATE usuarios SET email = LOWER(email);
UPDATE pedidos SET total = quantidade * preco WHERE status = 'pendente';</code></pre>
                </div>

                <h3>DELETE - Deletar Dados:</h3>
                <div class="code-wrapper">
                    <div class="code-header">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                        <span class="code-lang">sql</span>
                    </div>
                    <pre><code class="language-sql">-- Deletar um registro
DELETE FROM usuarios WHERE id = 5;

-- Deletar m√∫ltiplos registros
DELETE FROM usuarios WHERE ativo = FALSE AND criado_em < '2020-01-01';

-- Deletar todos (cuidado!)
DELETE FROM usuarios;

-- Usar DROP TABLE para deletar a tabela inteira
DROP TABLE usuarios;</code></pre>
                </div>
            </div>

            <div class="divider"></div>

            <!-- JOINs -->
            <div class="section">
                <h2>5. JOINs - Combinando Tabelas</h2>

                <p>JOINs permitem combinar dados de m√∫ltiplas tabelas baseado em relacionamentos. Existem diferentes tipos de JOINs com comportamentos distintos.</p>

                <h3>Estrutura de Exemplo:</h3>
                <div class="code-wrapper">
                    <div class="code-header">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                        <span class="code-lang">sql</span>
                    </div>
                    <pre><code class="language-sql">-- Tabela: usuarios
id | nome           | email
1  | Ana Silva      | ana@example.com
2  | Bruno Costa    | bruno@example.com
3  | Carlos Souza   | carlos@example.com

-- Tabela: pedidos
id | usuario_id | produto      | valor
1  | 1          | Notebook     | 3000.00
2  | 2          | Mouse        | 150.00
3  | 1          | Teclado      | 450.00
4  | 5          | Monitor      | 1200.00</code></pre>
                </div>

                <h3>INNER JOIN:</h3>
                <div class="code-wrapper">
                    <div class="code-header">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                        <span class="code-lang">sql</span>
                    </div>
                    <pre><code class="language-sql">-- Retorna apenas registros que existem em AMBAS as tabelas
SELECT usuarios.nome, pedidos.produto, pedidos.valor
FROM usuarios
INNER JOIN pedidos ON usuarios.id = pedidos.usuario_id;

-- Resultado:
-- Ana Silva | Notebook | 3000.00
-- Bruno Costa | Mouse | 150.00
-- Ana Silva | Teclado | 450.00
-- (Usu√°rio 5 n√£o aparece pois n√£o existe em usuarios)</code></pre>
                </div>

                <h3>LEFT JOIN:</h3>
                <div class="code-wrapper">
                    <div class="code-header">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                        <span class="code-lang">sql</span>
                    </div>
                    <pre><code class="language-sql">-- Retorna TODOS os registros da tabela esquerda + correspond√™ncias da direita
SELECT usuarios.nome, pedidos.produto, pedidos.valor
FROM usuarios
LEFT JOIN pedidos ON usuarios.id = pedidos.usuario_id;

-- Resultado:
-- Ana Silva | Notebook | 3000.00
-- Ana Silva | Teclado | 450.00
-- Bruno Costa | Mouse | 150.00
-- Carlos Souza | NULL | NULL
-- (Carlos Souza aparece mesmo sem pedidos)</code></pre>
                </div>

                <h3>RIGHT JOIN:</h3>
                <div class="code-wrapper">
                    <div class="code-header">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                        <span class="code-lang">sql</span>
                    </div>
                    <pre><code class="language-sql">-- Retorna TODOS os registros da tabela direita + correspond√™ncias da esquerda
SELECT usuarios.nome, pedidos.produto, pedidos.valor
FROM usuarios
RIGHT JOIN pedidos ON usuarios.id = pedidos.usuario_id;

-- Resultado:
-- Ana Silva | Notebook | 3000.00
-- Bruno Costa | Mouse | 150.00
-- Ana Silva | Teclado | 450.00
-- NULL | Monitor | 1200.00
-- (Monitor aparece mesmo que usuario_id 5 n√£o exista em usuarios)</code></pre>
                </div>

                <h3>FULL OUTER JOIN:</h3>
                <div class="code-wrapper">
                    <div class="code-header">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                        <span class="code-lang">sql</span>
                    </div>
                    <pre><code class="language-sql">-- Retorna TODOS os registros de AMBAS as tabelas
SELECT usuarios.nome, pedidos.produto, pedidos.valor
FROM usuarios
FULL OUTER JOIN pedidos ON usuarios.id = pedidos.usuario_id;

-- Resultado: Combina LEFT + RIGHT
-- Ana Silva | Notebook | 3000.00
-- Ana Silva | Teclado | 450.00
-- Bruno Costa | Mouse | 150.00
-- Carlos Souza | NULL | NULL
-- NULL | Monitor | 1200.00</code></pre>
                </div>

                <h3>CROSS JOIN:</h3>
                <div class="code-wrapper">
                    <div class="code-header">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                        <span class="code-lang">sql</span>
                    </div>
                    <pre><code class="language-sql">-- Retorna o produto cartesiano (todas as combina√ß√µes)
SELECT usuarios.nome, pedidos.produto
FROM usuarios
CROSS JOIN pedidos;

-- Resultado: 3 usu√°rios √ó 4 pedidos = 12 linhas
-- Ana Silva | Notebook
-- Ana Silva | Mouse
-- Ana Silva | Teclado
-- Ana Silva | Monitor
-- Bruno Costa | Notebook
-- ... (todas as combina√ß√µes)</code></pre>
                </div>
            </div>

            <div class="divider"></div>

            <!-- AGREGA√á√ïES -->
            <div class="section">
                <h2>6. Fun√ß√µes de Agrega√ß√£o</h2>

                <p>Fun√ß√µes de agrega√ß√£o calculam resumos a partir de m√∫ltiplos registros, como contagem, soma, m√©dia, m√°ximo e m√≠nimo.</p>

                <h3>Fun√ß√µes Principais:</h3>
                <div class="code-wrapper">
                    <div class="code-header">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                        <span class="code-lang">sql</span>
                    </div>
                    <pre><code class="language-sql">-- COUNT - Contar registros
SELECT COUNT(*) AS total_usuarios FROM usuarios;
SELECT COUNT(id) AS usuarios_com_id FROM usuarios;
SELECT COUNT(DISTINCT cidade) AS cidades_unicas FROM usuarios;

-- SUM - Somar valores
SELECT SUM(valor) AS valor_total FROM pedidos;
SELECT SUM(valor) AS valor_total FROM pedidos WHERE status = 'conclu√≠do';

-- AVG - Calcular m√©dia
SELECT AVG(valor) AS valor_medio FROM pedidos;
SELECT AVG(idade) AS idade_media FROM usuarios;

-- MAX e MIN - M√°ximo e m√≠nimo
SELECT MAX(valor) AS maior_pedido FROM pedidos;
SELECT MIN(valor) AS menor_pedido FROM pedidos;
SELECT MAX(criado_em) AS pedido_mais_recente FROM pedidos;

-- GROUP BY - Agrupar e agregar
SELECT usuario_id, COUNT(*) AS total_pedidos, SUM(valor) AS valor_total
FROM pedidos
GROUP BY usuario_id;

-- GROUP BY com HAVING (filtrar grupos)
SELECT usuario_id, COUNT(*) AS total_pedidos
FROM pedidos
GROUP BY usuario_id
HAVING COUNT(*) > 2;  -- Apenas usu√°rios com mais de 2 pedidos

-- Combina√ß√µes √∫teis
SELECT 
  usuarios.nome,
  COUNT(pedidos.id) AS total_pedidos,
  SUM(pedidos.valor) AS valor_gasto,
  AVG(pedidos.valor) AS valor_medio
FROM usuarios
LEFT JOIN pedidos ON usuarios.id = pedidos.usuario_id
GROUP BY usuarios.id, usuarios.nome;</code></pre>
                </div>
            </div>

            <div class="divider"></div>

            <!-- EXEMPLO PR√ÅTICO -->
            <div class="section">
                <h2>7. Exemplo Pr√°tico Completo</h2>

                <p>Vamos criar um sistema de e-commerce com m√∫ltiplas tabelas relacionadas.</p>

                <h3>Schema do Banco de Dados:</h3>
                <div class="code-wrapper">
                    <div class="code-header">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                        <span class="code-lang">sql</span>
                    </div>
                    <pre><code class="language-sql">-- Tabela: usuarios
CREATE TABLE usuarios (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nome VARCHAR(100) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    senha VARCHAR(255) NOT NULL,
    telefone VARCHAR(20),
    cidade VARCHAR(100),
    estado VARCHAR(2),
    ativo BOOLEAN DEFAULT TRUE,
    criado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Tabela: categorias
CREATE TABLE categorias (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nome VARCHAR(100) NOT NULL UNIQUE,
    descricao TEXT
);

-- Tabela: produtos
CREATE TABLE produtos (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nome VARCHAR(150) NOT NULL,
    descricao TEXT,
    preco DECIMAL(10, 2) NOT NULL,
    estoque INT DEFAULT 0,
    categoria_id INT NOT NULL,
    criado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (categoria_id) REFERENCES categorias(id)
);

-- Tabela: pedidos
CREATE TABLE pedidos (
    id INT PRIMARY KEY AUTO_INCREMENT,
    usuario_id INT NOT NULL,
    status ENUM('pendente', 'confirmado', 'enviado', 'entregue', 'cancelado') DEFAULT 'pendente',
    valor_total DECIMAL(10, 2) NOT NULL,
    data_pedido TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    data_entrega DATE,
    FOREIGN KEY (usuario_id) REFERENCES usuarios(id)
);

-- Tabela: itens_pedido
CREATE TABLE itens_pedido (
    id INT PRIMARY KEY AUTO_INCREMENT,
    pedido_id INT NOT NULL,
    produto_id INT NOT NULL,
    quantidade INT NOT NULL,
    preco_unitario DECIMAL(10, 2) NOT NULL,
    subtotal DECIMAL(10, 2) GENERATED ALWAYS AS (quantidade * preco_unitario) STORED,
    FOREIGN KEY (pedido_id) REFERENCES pedidos(id),
    FOREIGN KEY (produto_id) REFERENCES produtos(id)
);</code></pre>
                </div>

                <h3>Inserindo Dados:</h3>
                <div class="code-wrapper">
                    <div class="code-header">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                        <span class="code-lang">sql</span>
                    </div>
                    <pre><code class="language-sql">-- Inserir categorias
INSERT INTO categorias (nome, descricao) VALUES
('Eletr√¥nicos', 'Produtos eletr√¥nicos em geral'),
('Livros', 'Livros e e-books'),
('Roupas', 'Vestu√°rio e acess√≥rios');

-- Inserir produtos
INSERT INTO produtos (nome, descricao, preco, estoque, categoria_id) VALUES
('Notebook Dell', 'Intel i7, 16GB RAM', 3500.00, 10, 1),
('Mouse Logitech', 'Wireless, 1600 DPI', 150.00, 50, 1),
('Clean Code', 'Livro sobre c√≥digo limpo', 89.90, 25, 2),
('Camiseta B√°sica', '100% algod√£o', 45.00, 100, 3);

-- Inserir usu√°rios
INSERT INTO usuarios (nome, email, senha, telefone, cidade, estado) VALUES
('Ana Silva', 'ana@example.com', 'senha123', '11987654321', 'S√£o Paulo', 'SP'),
('Bruno Costa', 'bruno@example.com', 'senha456', '21987654321', 'Rio de Janeiro', 'RJ'),
('Diana Lima', 'diana@example.com', 'senha789', '85987654321', 'Fortaleza', 'CE');

-- Inserir pedido
INSERT INTO pedidos (usuario_id, status, valor_total) VALUES
(1, 'confirmado', 3650.00);

-- Inserir itens do pedido
INSERT INTO itens_pedido (pedido_id, produto_id, quantidade, preco_unitario) VALUES
(1, 1, 1, 3500.00),
(1, 2, 1, 150.00);</code></pre>
                </div>

                <h3>Consultas Complexas:</h3>
                <div class="code-wrapper">
                    <div class="code-header">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                        <span class="code-lang">sql</span>
                    </div>
                    <pre><code class="language-sql">-- 1Ô∏è‚É£ Listar pedidos com detalhes do usu√°rio
SELECT 
  p.id,
  u.nome AS usuario,
  u.email,
  p.status,
  p.valor_total,
  p.data_pedido
FROM pedidos p
JOIN usuarios u ON p.usuario_id = u.id
ORDER BY p.data_pedido DESC;

---

-- 2Ô∏è‚É£ Listar itens de um pedido espec√≠fico
SELECT 
  ip.id,
  pro.nome AS produto,
  ip.quantidade,
  ip.preco_unitario,
  ip.subtotal
FROM itens_pedido ip
JOIN produtos pro ON ip.produto_id = pro.id
WHERE ip.pedido_id = 1
ORDER BY ip.id;

---

-- 3Ô∏è‚É£ Calcular total gasto por usu√°rio
SELECT 
  u.nome,
  COUNT(p.id) AS total_pedidos,
  SUM(p.valor_total) AS valor_total_gasto,
  AVG(p.valor_total) AS ticket_medio,
  MAX(p.data_pedido) AS ultimo_pedido
FROM usuarios u
LEFT JOIN pedidos p ON u.id = p.usuario_id
GROUP BY u.id, u.nome
ORDER BY valor_total_gasto DESC;

---

-- 4Ô∏è‚É£ Produtos mais vendidos
SELECT 
  pro.nome,
  cat.nome AS categoria,
  SUM(ip.quantidade) AS quantidade_vendida,
  SUM(ip.subtotal) AS valor_total
FROM itens_pedido ip
JOIN produtos pro ON ip.produto_id = pro.id
JOIN categorias cat ON pro.categoria_id = cat.id
GROUP BY pro.id, pro.nome, cat.nome
ORDER BY quantidade_vendida DESC;

---

-- 5Ô∏è‚É£ Usu√°rios que n√£o fizeram pedidos
SELECT u.* FROM usuarios u
LEFT JOIN pedidos p ON u.id = p.usuario_id
WHERE p.id IS NULL;

---

-- 6Ô∏è‚É£ Relat√≥rio de vendas por categoria
SELECT 
  cat.nome AS categoria,
  COUNT(DISTINCT p.id) AS total_pedidos,
  COUNT(ip.id) AS total_itens,
  SUM(ip.subtotal) AS valor_total
FROM categorias cat
LEFT JOIN produtos pro ON cat.id = pro.categoria_id
LEFT JOIN itens_pedido ip ON pro.id = ip.produto_id
LEFT JOIN pedidos p ON ip.pedido_id = p.id
GROUP BY cat.id, cat.nome
ORDER BY valor_total DESC;</code></pre>
                </div>
            </div>

            <div class="divider"></div>

            <!-- BOAS PR√ÅTICAS -->
            <div class="section">
                <h2>8. Boas Pr√°ticas em SQL</h2>

                <div class="solid-box" style="border-left: 5px solid #0ea5e9;">
                    <h3>‚úì Use √çndices</h3>
                    <ul class="explanation-list">
                        <li>Crie √≠ndices em colunas frequentemente consultadas</li>
                        <li>Indexe chaves prim√°rias e estrangeiras automaticamente</li>
                        <li>Use √≠ndices com modera√ß√£o para n√£o impactar INSERT/UPDATE</li>
                    </ul>
                </div>

                <div class="solid-box" style="border-left: 5px solid #10b981;">
                    <h3>‚úì Normaliza√ß√£o de Dados</h3>
                    <ul class="explanation-list">
                        <li>Organize dados em tabelas relacionadas (evite redund√¢ncia)</li>
                        <li>Use de 1¬™ at√© 3¬™ forma normal (normaliza√ß√£o adequada)</li>
                        <li>Reduza espa√ßo de armazenamento e erros de inconsist√™ncia</li>
                    </ul>
                </div>

                <div class="solid-box" style="border-left: 5px solid #f59e0b;">
                    <h3>‚úì Seguran√ßa - Prepared Statements</h3>
                    <ul class="explanation-list">
                        <li>Use prepared statements para evitar SQL Injection</li>
                        <li>Nunca concatene strings em SQL</li>
                        <li>Valide e sanitize entrada do usu√°rio</li>
                    </ul>
                </div>

                <div class="solid-box" style="border-left: 5px solid #ef4444;">
                    <h3>‚úì Performance e Otimiza√ß√£o</h3>
                    <ul class="explanation-list">
                        <li>Use EXPLAIN para analisar plano de execu√ß√£o</li>
                        <li>Evite SELECT * (especifique colunas necess√°rias)</li>
                        <li>Limite resultados com LIMIT quando apropriado</li>
                    </ul>
                </div>
            </div>

            <div class="divider"></div>

            <!-- EXERC√çCIOS -->
            <div class="section">
                <h2>9. Exerc√≠cios Pr√°ticos</h2>
                
                <div class="exercise-box">
                    <h4>Exerc√≠cio 1: Banco de Dados de Biblioteca</h4>
                    <p>Crie um banco de dados com tabelas: autores, livros, empr√©stimos e usu√°rios. Implemente consultas para listar livros por autor, hist√≥rico de empr√©stimos e usu√°rios com mais atrasos.</p>
                </div>

                <div class="exercise-box">
                    <h4>Exerc√≠cio 2: Relat√≥rios Mensais</h4>
                    <p>Desenvolva queries para gerar relat√≥rios de vendas mensais, produtos mais lucrativos, e compara√ß√£o de desempenho entre per√≠odos.</p>
                </div>

                <div class="exercise-box">
                    <h4>Exerc√≠cio 3: Otimiza√ß√£o de Queries</h4>
                    <p>Pegue um conjunto de queries ineficientes e otimize-as usando √≠ndices, EXPLAIN e reformula√ß√£o de l√≥gica SQL.</p>
                </div>

                <div class="exercise-box">
                    <h4>Exerc√≠cio 4: Integridade de Dados</h4>
                    <p>Implemente constraints, triggers e valida√ß√µes para garantir a integridade referencial e dados consistentes.</p>
                </div>

                <div class="exercise-box">
                    <h4>Exerc√≠cio 5: Backup e Restaura√ß√£o</h4>
                    <p>Pratique backup e restaura√ß√£o de bancos de dados, versionamento de schema e migrations.</p>
                </div>
            </div>

            <div class="divider"></div>

            <!-- CONCLUS√ÉO -->
            <div class="conclusion-box">
                <h2>Conclus√£o</h2>
                <p><strong>SQL</strong> √© a linguagem fundamental para qualquer desenvolvedor que trabalhe com dados. Dominar SQL √© essencial para criar aplica√ß√µes eficientes, seguras e escal√°veis.</p>
                <p>Pontos-chave para lembrar:</p>
                <ul class="explanation-list">
                    <li><strong>CRUD</strong> s√£o as opera√ß√µes b√°sicas (Create, Read, Update, Delete)</li>
                    <li><strong>JOINs</strong> combinam dados de m√∫ltiplas tabelas de forma poderosa</li>
                    <li><strong>Agrega√ß√µes</strong> calculam resumos a partir de dados</li>
                    <li><strong>√çndices</strong> e <strong>normaliza√ß√£o</strong> otimizam desempenho</li>
                    <li><strong>Seguran√ßa</strong> (prepared statements) protege contra SQL Injection</li>
                </ul>
                <p>Pratique criando seus pr√≥prios bancos de dados, come√ßando simples e evoluindo para estruturas mais complexas. SQL √© uma habilidade que se aprimora com a pr√°tica! üöÄ</p>
            </div>

        </section>

        <!-- RODAP√â -->
        <footer class="footer">
            <p><strong>JAVA Learning</strong> - Hub de Conte√∫do SENAI</p>
            <p>SQL: CRUD, JOINs, Agrega√ß√µes, Integridade, Otimiza√ß√£o!</p>
            <p>Do conceito √† implementa√ß√£o: Bancos de dados robustos, seguros e bem estruturados!</p>
        </footer>
    </div>

    <!-- Bot√£o Voltar ao Topo com Menu -->
    <div class="scroll-to-top-wrapper">
        <button class="scroll-to-top" id="scrollToTop" aria-label="Menu de navega√ß√£o">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="18 15 12 9 6 15"></polyline>
            </svg>
        </button>
        
        <nav class="scroll-menu" id="scrollMenu">
            <ul></ul>
        </nav>
    </div>

    <script defer src="../js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            hljs.highlightAll();
        });
    </script>
</body>
</html>